{{define "content"}}
<div class="container">
   <div class="text-center">
       <span class="font-weight-bold">{{.ServerFile.Name}}</span>
   </div>
   <div>
       <span>file size:</span>  <span>{{.ServerFile.Size}} bytes</span>
   </div>
   <div>
       <span>upload time:</span>  <span>{{formatTime .File.InsertTime ""}}</span>
   </div>
   <div>
       <span>user:</span>  <span>{{.File.UserName}}</span>
   </div>
   <div>
       <span>description:</span>  <span>{{.File.Description}}</span>
   </div>
   <div>
       <span>revision:</span>  <span>{{.File.Commit_id}}</span>
   </div>
   <div  class="mt-3">       
    <a id="download" href="{{.DownloadUrl}}" class="btn btn-primary">download</a>
    <!-- <a id="histories" href="{{.HistoryUrl}}" class="btn btn-primary">histories</a> -->
    {{if .CanDelete}}   
    <!-- <a id="delete" href="#" class="btn btn-danger">delete</a> -->
    {{end}}
   </div>
</div>
{{end}}
{{define "scripts"}}
<script>
    // function downloadFile(url){
    // $.getJSON(url,function(d){
    // alert(d.data)
    // })
    // }
    // $("#download").on("click",function(){
    //     downloadFile('{{downloadUrl}}')
    // })
    var delete_url="{{.DeleteUrl}}"
    $("#delete").on("click",function(){
        if(confirm("are you sure to delete this file?")){
            $.ajax({
            url: delete_url,
            type: 'DELETE',
            success: function(result) {
                if(result.error==null){
                    document.location.href="/file/list"
                }else{
                    alert(result.error)
                }
             }
        })
        }
    })
</script>
{{end}}